# âš–ï¸ LLM-as-a-Judge: Positional Bias Evaluation

<div align="center">
  <img src="https://img.shields.io/badge/Model-Gemini%203%20Flash-blue?style=flat-square&logo=google" alt="Gemini 3 Flash"/>
  <img src="https://img.shields.io/badge/Language-Python%203.11%2B-blue?style=flat-square&logo=python" alt="Python"/>
  <img src="https://img.shields.io/badge/Status-Experiment%20Complete-success?style=flat-square" alt="Status"/>
</div>

<br>

ì´ ë ˆí¬ì§€í† ë¦¬ëŠ” LLMì„ í™œìš©í•˜ì—¬ ë‘ ê°œì˜ í…ìŠ¤íŠ¸ë¥¼ ìƒí˜¸ ë¹„êµ í‰ê°€(A/B Test, LLM-as-a-Judge)í•  ë•Œ ë°œìƒí•˜ëŠ” **ìœ„ì¹˜ í¸í–¥(Positional Bias)** ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ ìë™í™”ëœ ì‹¤í—˜ ë„êµ¬ì™€ ê·¸ ë¶„ì„ ê²°ê³¼ë¥¼ ë‹´ê³  ìˆìŒ.

ë³¸ ì‹¤í—˜ì—ì„œëŠ” `gemini-3-flash-preview` ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬, **"ë‚´ìš©ì˜ í’ˆì§ˆê³¼ ë¬´ê´€í•˜ê²Œ ëª¨ë¸ì´ í”„ë¡¬í”„íŠ¸ ìƒì˜ íŠ¹ì • ìœ„ì¹˜(ì²« ë²ˆì§¸ vs ë‘ ë²ˆì§¸)ì— ë°°ì¹˜ëœ ì„ íƒì§€ë¥¼ ë¬´ì¡°ê±´ ë” ì„ í˜¸í•˜ëŠ”ê°€?"** ì— ëŒ€í•œ í†µê³„ì  ê²€ì¦ì„ ìˆ˜í–‰í•¨.

---

## âš ï¸ í•µì‹¬ ìš”ì•½ (TL;DR)

`gemini-3-flash-preview` ëª¨ë¸ì€ ë‘ ê°œì˜ ì˜µì…˜ì„ ë¹„êµí•  ë•Œ, **ë‘ ë²ˆì§¸ ì˜µì…˜ì„ ê°•í•˜ê²Œ ì„ í˜¸(68% ìŠ¹ë¥ )** í•˜ëŠ” ê°•ë ¥í•œ ìœ„ì¹˜ í¸í–¥ì„ ê°€ì§€ê³  ìˆìŒ. 
í¸í–¥ ì™„í™” ì „ëµ(ì´ì¤‘ í‰ê°€, ëœë¤ ì…”í”Œë§, ì ˆëŒ€ ì ìˆ˜ ì‚°ì • ë“±) ì—†ì´ëŠ” í•´ë‹¹ ëª¨ë¸ì„ **ìŒë³„ ë¹„êµ(Pairwise Comparison) ë¡œì§ì— ë‹¨ì¼ ìŠ¤í…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¶€ì ì ˆí•¨**.

---

## ğŸ§ª ì‹¤í—˜ ì„¤ê³„ ë° ë°©ë²•ë¡ 

### 1. ì£¼ì œ ë° ë¹„êµ ëŒ€ìƒ
- **ì§ˆë¬¸**: "ìš´ì˜ì²´ì œì—ì„œ í”„ë¡œì„¸ìŠ¤ë€ ë¬´ì—‡ì¸ê°€?"
- **Answer A**: ì‹¤í–‰ ë‹¨ìœ„ ë° ë©”ëª¨ë¦¬ êµ¬ì¡°(Code, Data, Stack)ì— ì´ˆì ì„ ë§ì¶˜ ì™„ì„±ë„ ë†’ì€ ë‹µë³€
- **Answer B**: ìƒëª…ì£¼ê¸°(Lifecycle) ë° PCB ê´€ë¦¬ì— ì´ˆì ì„ ë§ì¶˜ ë‹µë³€

### 2. ì‹¤í—˜ í™˜ê²½
- **ì´ ì‹œí–‰ íšŸìˆ˜**: 100íšŒ
- **ê·¸ë£¹ ë¶„ë¦¬**: 
  - ê·¸ë£¹ 1 (`A-B` ìˆœì„œë¡œ ì œì‹œ) : 50íšŒ
  - ê·¸ë£¹ 2 (`B-A` ìˆœì„œë¡œ ì œì‹œ) : 50íšŒ
- **ëª¨ë¸**: `gemini-3-flash-preview` 
- **ì œí•œ ì‚¬í•­**: API Rate Limiting ë°©ì§€ë¥¼ ìœ„í•œ ì‹œí–‰ ê°„ 1ì´ˆ ì§€ì—°(Sleep)

---

## ğŸ“Š ìƒì„¸ ì‹¤í—˜ ê²°ê³¼

ì „ì²´ 100íšŒì˜ ì‹¤í—˜ ë¡œê·¸ ì›ë³¸ì€ [`results.json`](./results.json) íŒŒì¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŒ.

### 1. ìœ„ì¹˜ë³„ ìŠ¹ë¥  í†µê³„
| ì§€í‘œ | ê²°ê³¼ |
|------|-----|
| ì´ ì‹œí–‰ íšŸìˆ˜ | 100íšŒ |
| API íŒŒì‹± ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | 0ê±´ |
| **ì²« ë²ˆì§¸ ìœ„ì¹˜** ìŠ¹ë¦¬ íšŸìˆ˜ | 32íšŒ (32%) |
| **ë‘ ë²ˆì§¸ ìœ„ì¹˜** ìŠ¹ë¦¬ íšŸìˆ˜ | **68íšŒ (68%)** âš ï¸ |

*(ì´ë¡ ì ìœ¼ë¡œ ìœ„ì¹˜ í¸í–¥ì´ ì—†ë‹¤ë©´ 50%ì— ìˆ˜ë ´í•´ì•¼ í•¨. ì¤‘ë¦½ ëŒ€ë¹„ **+18%pì˜ í¸í–¥** ì¡´ì¬)*

### 2. ë‹µë³€(Answer)ë³„ êµì°¨ ê²€ì¦ ì„±ëŠ¥
| ì˜µì…˜ | ì²« ë²ˆì§¸ ìœ„ì¹˜ì— ì œì‹œë  ë•Œ ìŠ¹ë¥  | ë‘ ë²ˆì§¸ ìœ„ì¹˜ì— ì œì‹œë  ë•Œ ìŠ¹ë¥  |
|------|-------------------------------|-------------------------------|
| **Answer A** | 32/50 **(64%)** | 50/50 **(100%)** âš ï¸ |
| **Answer B** | 0/50 **(0%)** âš ï¸ | 18/50 **(36%)** |

**ë¶„ì„ í¬ì¸íŠ¸:**
ë‹µë³€ Aê°€ í’ˆì§ˆì´ ë” ì¢‹ê¸° ë•Œë¬¸ì— ì „ë°˜ì ìœ¼ë¡œ ìŠ¹ë¥ ì´ ë†’ì§€ë§Œ, **ë‹µë³€ BëŠ” ì²« ë²ˆì§¸ ìœ„ì¹˜ì— ìˆì„ ë•Œ ë‹¨ í•œ ë²ˆ(0%)ë„ ìŠ¹ë¦¬í•˜ì§€ ëª»í•œ ë°˜ë©´, ë‘ ë²ˆì§¸ ìœ„ì¹˜ì— ë°°ì¹˜ë˜ì 36% í™•ë¥ ë¡œ ìŠ¹ë¦¬**í•¨. ì´ëŠ” ë‚´ìš©ì˜ í’ˆì§ˆë³´ë‹¤ í…ìŠ¤íŠ¸ì˜ ë°°ì¹˜ ìœ„ì¹˜ê°€ í‰ê°€ì— ê²°ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆìŒì„ í™•ì¦í•¨.

---

## ğŸ’¡ ì‹œì‚¬ì  ë° í”„ë¡œë•ì…˜ ì ìš© ê°€ì´ë“œ

ì´ëŸ¬í•œ ì‹¤í—˜ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ, í”„ë¡œì íŠ¸ ë° í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ LLMì„ ì±„ì ê´€(Judge)ìœ¼ë¡œ ë„ì…í•  ë•Œ ë‹¤ìŒì˜ ë°©ì–´ ë¡œì§ ì„¤ê³„ê°€ ê°•ë ¥íˆ ê¶Œì¥ë¨.

1. **ì´ì¤‘ í‰ê°€ (Dual-Evaluation)** ğŸŒŸ
   - í”„ë¡¬í”„íŠ¸ë¥¼ `[A vs B]` ë¡œ í•œ ë²ˆ, `[B vs A]`ë¡œ ë˜ í•œ ë²ˆ í˜¸ì¶œí•˜ëŠ” **ë¹„ë™ê¸° íˆ¬í‘œ ë°©ì‹**ì„ ì±„íƒí•¨.
   - ë‘ íŒë‹¨ì´ ì¼ì¹˜í•  ë•Œë§Œ ìŠ¹ë¦¬ë¥¼ ì¸ì •í•˜ê³ , ì—‡ê°ˆë¦¬ë©´ ë¬´ìŠ¹ë¶€(Tie)ë¡œ ì²˜ë¦¬í•¨.
2. **ì ˆëŒ€ ì ìˆ˜ í‰ê°€ (Absolute Scoring)**
   - ë¹„êµ í‰ê°€(Relative) ë°©ì‹ì˜ ë§¹ì ì„ í”¼í•˜ê¸° ìœ„í•´ ê°œë³„ í”„ë¡¬í”„íŠ¸ìƒì—ì„œ ê°ê° 0~100ì ì˜ ì ˆëŒ€ì ì¸ ì²™ë„ë¡œ ì±„ì í•œ í›„ ë­í‚¹ì„ ë§¤ê¹€.
3. **ìœ„ì¹˜ ì…”í”Œë§ (Position Shuffling)**
   - API ë¹„ìš© ë¬¸ì œë¡œ ë‹¨íšŒì„± í˜¸ì¶œë§Œ ë¶ˆê°€ëŠ¥í•  ê²½ìš°, A/Bì˜ ìˆœì„œë¥¼ ë¬´ì‘ìœ„(`random.shuffle`)ë¡œ ë°°ì¹˜í•˜ì—¬ íŠ¹ì • ì°¸ê°€ìê°€ í¸í–¥ìœ¼ë¡œ ì¸í•œ ì˜êµ¬ì ì¸ ì†í•´/ì´ë“ì„ ë³´ì§€ ëª»í•˜ë„ë¡ ì„¤ê³„í•¨.

---

## ğŸ’» ë¹ ë¥¸ ì‹œì‘ (Quick Start)

ë³¸ ì‹¤í—˜ì€ ëˆ„êµ¬ë‚˜ ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì¬í˜„í•  ìˆ˜ ìˆìŒ. ë™ì¼í•œ ìŠ¤í¬ë¦½íŠ¸ë¡œ ìµœì‹  ëª¨ë¸ë“¤ì˜ ë²¤ì¹˜ë§ˆí‚¹ë„ ê°€ëŠ¥í•¨.

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/sincheol/LLM-as-a-Judge.git
cd LLM-as-a-Judge

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pip install google-generativeai python-dotenv

# 3. í™˜ê²½ë³€ìˆ˜ ì…‹íŒ… (.env íŒŒì¼ ìƒì„±)
echo "GEMINI_API_KEY=your-api-key-here" > .env

# 4. ìë™í™” í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (100ë²ˆ í˜¸ì¶œ)
python bias_test.py
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°
- `bias_test.py`: 100íšŒ ìë™í™” A/B í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (Python)
- `results.json`: 100ë²ˆì˜ LLM Raw Response ì‘ë‹µê³¼ í‰ê°€ ì‚¬ìœ ê°€ ë‹´ê¸´ ì›ë³¸ ë°ì´í„°

