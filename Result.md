# LLM-as-a-Judge μ„μΉ νΈν–¥ μ›μΈ κ·λ… λ° μν•™μ  μ™„ν™”(PAIRS) μ‹¤ν— λ³΄κ³ μ„

λ³Έ λ¬Έμ„μ—μ„λ” λ€ν• μ–Έμ–΄ λ¨λΈ(Gemini-3-Flash-Preview)μ„ μ‹¬ν(Judge)μΌλ΅ ν™μ©ν•λ” Pairwise-preference(μλ³„ λΉ„κµ) κµ¬μ„±μ—μ„ λ°μƒν•λ” μΉλ…μ μΈ **μ„μΉ νΈν–¥(Positional Bias, 68%~100%)**μ κ·Όλ³Έ μ›μΈμ„ λ¶„μ„ν•κ³ , μ΄λ¥Ό ν”„λ΅¬ν”„νΈ μ—”μ§€λ‹μ–΄λ§ ν•κ³„μ—μ„ λ²—μ–΄λ‚ **λ””μ½”λ”© μ μ–΄(Constrained Decoding)** λ° **λ΅μ§“ μ •κ·ν™”(Logprobs Softmax Calibration)** λ λ²¨μ—μ„ μ™„λ²½ν•κ² μ†κ±°ν• μΌλ ¨μ μ‹¤ν— κ²°κ³Όλ¥Ό μ΄λ§λΌν•©λ‹λ‹¤.

---

> β οΈ **μ©μ–΄ μ •λ¦¬: μ„μΉ νΈν–¥(Positional Bias)μ΄λ€?**
> μ„μΉ νΈν–¥ μΉλ¥ μ΄ λ†’λ‹¤λ” κ²ƒμ€ **"λ¨λΈμ΄ μ •λ‹µμ„ μ λ§μ·„λ‹¤"λ” λ»μ΄ μ λ€ μ•„λ‹™λ‹λ‹¤.** λ‘ λ‹µλ³€μ μ‹¤μ  ν€„λ¦¬ν‹°μ™€ λ¬΄κ΄€ν•κ², **λ‹¨μ§€ ν™”λ©΄μ— λ‘ λ²μ§Έ(λ§μ§€λ§‰)λ΅ μ μ‹λμ—λ‹¤λ” μ΄μ λ§μΌλ΅ λ§Ήλ©μ μΌλ΅ κ·Έ λ‹µλ³€μ„ μΉμλ΅ μ°μ–΄λ²„λ¦¬λ” AIμ λ§Ήμ (Blind Spot)**μ„ μλ―Έν•©λ‹λ‹¤. (μ¦‰, μ„μΉ νΈν–¥ 90% = 90% ν™•λ¥ λ΅ ν€„λ¦¬ν‹° μ• λ³΄κ³  κ·Έλƒ¥ λ§μ§€λ§‰ μµμ…μ„ μ°μ)

---

## π”¬ PART 1. ν”„λ΅¬ν”„νΈ μ—”μ§€λ‹μ–΄λ§μ„ ν†µν• νΈν–¥ μ μ–΄ μ‹λ„ (Track 1)

LLMμ μ£Όμλ ¥ λ§¤μ»¤λ‹μ¦(Attention Mechanism)μ΄ μ§€λ‹λ” λ‚΄μ¬μ μΈ 'μµμ‹  νΈν–¥(Recency Bias)'μ„ ν”„λ΅¬ν”„νΈ μ£Όμ…κ³Ό λ…Όλ¦¬μ  λ‹¤λ‹¨κ³„ μ¶”λ΅ μΌλ΅ μ™„ν™”ν•  μ μλ”μ§€ κ²€μ¦ν–μµλ‹λ‹¤.

| μ‹¤ν— μ „λµ | λ©”μ»¤λ‹μ¦ μ”μ•½ | N | μ„μΉ νΈν–¥ κ²°κ³Ό (Second Position Wins) | TIE(κ²°κ³Ό μ¶©λ) |
| :--- | :--- | :--- | :--- | :--- |
| **BPC** (Balanced Position Calibration) | ν”„λ΅¬ν”„νΈ μ…λ ¥ μμ„λ¥Ό [A-B], [B-A]λ΅ 2ν μ¤μ™‘ νΈμ¶ν•μ—¬ κµμ°¨ κ²€μ¦ | 100 | 61.9% (μ ν¨ νμ • κΈ°μ¤€) | **79.0%** (μ‚¬μ© λ¶κ°€) |
| **MEC** (Multiple Evidence Correction) | μΉμ νμ • μ „, μ–‘ λ‹µλ³€μ— λ€ν• λ¶„μ„ λ° Chain-of-Thought(CoT) κ°•μ  | 100 | **88.0% (νΈν–¥ μ•…ν™”)** | 0% |
| **CAI** (Constitutional AI) | "μ„μΉ λΉ„μμ΅΄μ„±", "κ· ν•μ  ν‰κ°€" λ“± λ€μ›μΉ™μ„ System Promptλ΅ μ£Όμ… | 100 | **93.0% (μµμ•…μ νΈν–¥)** | 0% |

### π’΅ Track 1 λ¶„μ„ λ° AI μ•„ν‚¤ν…μ² κ΄€μ μ μ‹μ‚¬μ 
1. **μ•„μ΄λ¬λ‹μ»¬ ν”„λ΅μ„Έμ¤ μ΄λ΅ (Ironic Process Theory)**: LLMμ—κ² λ…μ‹μ μΌλ΅ "νΈν–¥μ„ λ²„λ ¤λΌ(CAI)"λΌκ³  μ§€μ‹ν•κ±°λ‚, "μ–‘μΈ΅ λ¨λ‘λ¥Ό κΈΈκ² λ¶„μ„ν•λΌ(MEC)"κ³  κ°•μ ν• μλ΅ λ¨λΈμ€ λ§μ§€λ§‰μ— μ²λ¦¬ν• ν† ν°(Second Option)μ— λ” κ°•ν• Attention κ°€μ¤‘μΉλ¥Ό ν• λ‹Ήν•μ—¬ μ¤νλ ¤ νΈν–¥μ΄ 93%κΉμ§€ κ·Ήλ‹¨ν™”λλ” ν„μƒμ΄ λ°μƒν–μµλ‹λ‹¤.
2. **λ‹¨λ°©ν–¥ μ¶”λ΅ μ ν•κ³„**: λ‹¨μΌ ν”„λ΅¬ν”„νΈ ν™κ²½ ν•μ—μ„λ” μ–΄λ– ν• ν”„λ΅¬ν”„ν… κΈ°λ²•μΌλ΅λ„ μλ³„ λΉ„κµμ κµ¬μ΅°μ  νΈν–¥μ„ κµμ •ν•  μ μ—†μμ΄ μ¦λ…λμ—μµλ‹λ‹¤.
3. **BPCμ μ„λΉ„μ¤ ν•κ³„μ„±**: μμ„λ¥Ό λ°”κΏ”μ„ κ²€μ¦ν•λ©΄ λΉ„λ…Όλ¦¬μ μΈ νμ •μ„ 79% ν™•λ¥ λ΅ κ±Έλ¬λ‚Ό μ μμ—μΌλ‚, μ΄λ” νΈν–¥λ μ‘λ‹µμ„ 'λ²„λ¦¬λ”(Drop)' μ—­ν• μΌ λΏ ν”„λ΅λ•μ… ν™κ²½μ—μ„ μ μ €μ—κ² μΉν¨λ¥Ό λ°ν™ν•  μ μ—†λ” TIE(λ¬΄μΉλ¶€) μƒνƒμ— λΉ μ§€κ² λ§λ“¤μ–΄ UX μ•„ν‚¤ν…μ²μ— μΉλ…μ μ…λ‹λ‹¤.

---

## π”¬ PART 2. Constrained Decoding & PAIRS (Logprobs) κµμ • κΈ°λ²• (Track 2) π

ν…μ¤νΈ λ„λ©”μΈ(Track 1)μ ν•κ³„λ¥Ό κ·Ήλ³µν•κΈ° μ„ν•΄, λ¨λΈμ λ‚΄λ¶€ μƒμ„± ν™•λ¥ (Next Token Prediction Probability) λ λ²¨λ΅ κ°μ…ν•μ—¬ νΈν–¥μ„ λ””λ²„κΉ…ν–μµλ‹λ‹¤.

### 2.1. ν•΄κ²° κ³Όμ  λ° λ””μ½”λ”© λ©”μ»¤λ‹μ¦(Decoding Mechanism) μμ •
*   **λ¬Έμ **: μµμ‹  κµ¬μ΅°μ λ¨λΈ(Flash κ³„μ—΄)μ€ κ°•ν• `Thinking(λ‚΄λ¶€ μ¶”λ΅ )` λ©”μ»¤λ‹μ¦μ„ λ‚΄μ¥ν•κ³  μμ–΄, λ‹¨μ `max_output_tokens=1`μ„ μ μ©ν•  κ²½μ° μ¶”λ΅  ν† ν°(`<thought>`)λ§ λ±‰κ³  μ‘λ‹µμ΄ μ§¤λ ¤ μ •λ‹µ ν›„λ³΄κµ°("1", "2")μ ν™•λ¥  κ³µκ°„(Logprobs) μ¶”μ μ΄ λ¶κ°€λ¥ν–μµλ‹λ‹¤.
*   **ν•΄κ²° (Constrained Decoding λ„μ…)**: Vertex AI μΈν”„λΌ μƒμ—μ„ `response_mime_type="text/x.enum"` λ° `{"enum": ["1", "2"]}` μ¤ν‚¤λ§λ¥Ό μ£Όμ…ν–μµλ‹λ‹¤. μ΄λ” λ¨λΈμ—κ² λ‹¨μν μ¶λ ¥ ν¬λ§·μ„ μ§€μ‹ν•λ” κ²ƒμ„ λ„μ–΄, **Vocabulary ν™•λ¥  ν’€ μμ²΄λ¥Ό ["1", "2"] λ‘ κ°λ΅ λ¬Όλ¦¬μ μΌλ΅ λ¶•κ΄΄(Collapse)μ‹ν‚¤κ³  κ·Έ μ™Έ λ¨λ“  ν† ν°μ ν™•λ¥ μ„ $-\infty$λ΅ μ²λ¦¬**ν•λ” κ°€μ¥ κ°•λ ¥ν• μ μ–΄ κΈ°λ²•μ…λ‹λ‹¤. μ¶”λ΅  λ‹¨κ³„λ¥Ό κµ¬μ΅°μ μΌλ΅ κ±΄λ„λ›°κ² λ§λ“¤κ³  μμΈ΅ λ΅μ§“(Logits)μ„ 100% μ¨μ „ν•κ² μΊ΅μ²ν–μµλ‹λ‹¤.

### 2.2. PAIRS (Pairwise-preference Search) λ³΄μ • μ•κ³ λ¦¬μ¦ μ μ©
μ¶”μ¶λ "1"κ³Ό "2" ν† ν°μ ν™•λ¥ κ°’(Logprobs)μ— Softmaxλ¥Ό μ μ©ν•μ—¬ ν™•λ¥ λ΅ μ •κ·ν™”ν• λ’¤, μ„μΉ A, Bμ— λ€ν•΄ ν”„λ΅¬ν”„νΈ μ¤μ™‘([A-B], [B-A]) μ–‘λ°©ν–¥ ν‰κ· (Bradley-Terry Model)μ„ μ‚°μ¶ν•μ—¬ ν™•μ‹ λ„(Confidence Score)λ¥Ό λ„μ¶ν–μµλ‹λ‹¤.

### π“ μΆ…ν•© κ²°κ³Ό (gemini-3-flash-preview κΈ°μ¤€, 100 Trials)
| μ§€ν‘ | Raw Baseline (λΉ„λ³΄μ • ν…μ¤νΈ) | PAIRS (λ΅μ§“ μν•™ λ³΄μ •) |
| :--- | :--- | :--- |
| **[A-B] λ°°μ—΄ μ‹ A μΉλ¦¬** | 100% | 100% |
| **[B-A] λ°°μ—΄ μ‹ A μΉλ¦¬** | 100% | 100% |
| **μ „μ²΄ ν¬μ§€μ… νΈν–¥λ¥ ** | **0% (Zero Positional Bias)** | - |
| **ν‰κ·  κµμ • ν™•λ¥ (Confidence)** | - | **$P(\text{A}) \approx 99.8\%$**, $P(\text{B}) \approx 0.2\%$ |

### π’΅ Track 2 λ¶„μ„ (The Surprise Finding & Robustness)
1. **μƒμ„± μ μ•½(Constrained Decoding)λ§μΌλ΅ νΈν–¥ 0% λ‹¬μ„±**: μ΄λ² μ‹¤ν—μ κ°€μ¥ μ¶©κ²©μ μΈ λ°κ²¬μ…λ‹λ‹¤. **μν•™μ  λ³΄μ •(PAIRS μμ‹)μ„ μ μ©ν•κΈ°λ„ μ „μ—,** ν…μ¤νΈ μ¶λ ¥ μμ λ„λ¥Ό 100% λ°•νƒν•κ³  μμΈ΅ κ³µκ°„μ„ Enum("1", "2")μΌλ΅ λ‹«μ•„λ²„λ¦¬μ **Raw νμ • λ‹¨κ³„μ—μ„ μ΄λ―Έ μ„μΉ νΈν–¥μ΄ 0%λ΅ μ™„λ²½ν μ†κ±°**λμ—μµλ‹λ‹¤. λ¨λΈμ—κ² "μƒκ°ν•  ν‹(Thinking ν† ν°)"μ„ μ£Όμ§€ μ•κ³  μ§κ΄€μ μΈ λ§ν‚Ήλ§ κ°•μ”ν–μ„ λ•, μ¤νλ ¤ λ¨λΈ λ³Έμ—°μ κ°κ΄€μ„±(ν•­μƒ ν€„λ¦¬ν‹°κ°€ λ” μΆ‹μ€ Aλ¥Ό μ„ νƒ)μ΄ 100% λ¶€ν™ν–μµλ‹λ‹¤.
2. **PAIRS ν™•λ¥ μ μ—”νΈλ΅ν”Ό ν•΄μ„ (Uncertainty & Robustness)**: μ¶”μ¶λ Logprobs μ •κ·ν™” κ°’μ€ λ‹¨μν• μ‹ λΆ°λ„κ°€ μ•„λ‹λΌ λ¨λΈμ΄ λ±‰μ€ **ν™•λ¥ (Probability)** κ·Έ μμ²΄μ…λ‹λ‹¤. μ΄ ν™•λ¥  λ¶„ν¬μ λ‹¨λ‹¨ν•¨(Robustness)μ€ λ‹¤μμ **μ—”νΈλ΅ν”Ό(Entropy) κΈ°λ° λ¶ν™•μ‹¤μ„± κ³µμ‹**μΌλ΅ μ„¤λ…ν•  μ μμµλ‹λ‹¤.
   > $$ U(y_i, y_j) = -P(y_i > y_j)\log(P(y_i > y_j)) - P(y_j > y_i)\log(P(y_j > y_i)) $$
   *   **Low Uncertainty (Robust)**: $P(A) \approx 0.998$, $P(B) \approx 0.002$μ²λΌ ν™•λ¥ μ΄ ν•μ½μΌλ΅ λλ ·ν•κ² μ λ¦΄ κ²½μ°, μ„ κ³µμ‹μ„ μ μ©ν• μ—”νΈλ΅ν”Ό κ²°κ³Όκ°’ $U$λ” **0μ— ν•μ—†μ΄ μλ ΄**ν•©λ‹λ‹¤.
   *   μ΄λ” λ¨λΈμ νλ‹¨μ΄ κ·Ήλ„λ΅ **ν™•κ³ (Robust)**ν•λ©°, ν”„λ΅¬ν”„νΈ μ„μΉ(μμ„)λ¥Ό λ°”κΎΈλ” λ“±μ μ–•μ€ μ™Έλ¶€ λ…Έμ΄μ¦(μ–΄ν…μ… ν”λ“¤λ¦Ό)μ— μ λ€ ν”λ“¤λ¦¬μ§€ μ•λ” 'λ‹¨λ‹¨ν• κ²°κ³Ό'λ¥Ό λ„μ¶ν•΄λƒμμ„ μν•™μ μΌλ΅ μ¦λ…ν•©λ‹λ‹¤.
3. **λ¬΄μΉλ¶€(TIE)μ μ†λ©Έ**: Track 1(BPC)μ—μ„λ” 79%κ°€ λ¬΄μΉλ¶€ μ²λ¦¬λμ—μΌλ‚, λ³Έ κΈ°λ²•μ„ ν†µν•΄μ„λ” 100νμ ν‰κ°€κ°€ μ™„μ¶©λ¨μ΄ μ—†μ΄ **100% λ…ν™•ν• μΉμλ¥Ό λ„μ¶**ν•΄ λ‚΄μ—μµλ‹λ‹¤.

---

## π† μΆ…ν•© κ²°λ΅  (Executive Summary)

LLM-as-a-Judge μ•„ν‚¤ν…μ²μ—μ„ λ°μƒν•λ” μ‹¬κ°ν• Positional Bias(μµλ€ 93%)λ¥Ό μ μ–΄ν•κΈ° μ„ν• μλ°± νμ λ²¤μΉλ§ν¬ κ²°κ³Ό, **μμ—°μ–΄ ν”„λ΅¬ν”„νΈ νΈλ¦­(CAI, MEC, BPC)μ— μμ΅΄ν•λ” κ²ƒμ€ AI κ³µν•™μ μΌλ΅ μ λ€μ μΌλ΅ μ‹¤ν¨ν•λ” μ ‘κ·Ό**μ…λ‹λ‹¤.

μ‹ λΆ°ν•  μ μκ³  μ™„λ²½ν νΈν–¥μ΄ λ°°μ λ(Biass-free) νμ • μ‹μ¤ν…(PvP Mode)μ„ κµ¬μ¶•ν•κΈ° μ„ν• μ•„ν‚¤ν…μ² ν‘μ¤€(Best Practice)μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

### β… μ±„νƒν•΄μ•Ό ν•  μµμΆ… μ•„ν‚¤ν…μ² (Track 2)
**[Constrained Decoding + PAIRS Calibration]**
1. **API νΈμ¶**: Vertex AI ν™κ²½μ—μ„ `response_schema` Enum λ°©μ‹μ„ μ μ©ν•μ—¬ ν‰κ°€λ¥Ό μ§„ν–‰ν•©λ‹λ‹¤.
2. **ν‰κ°€ λ°©μ‹**: μ–‘λ°©ν–¥(A-B, B-A) μλ³„ ν”„λ΅¬ν”„νΈλ¥Ό λ³΄λ‚΄ Logprobsλ¥Ό μ¶”μ¶ν•©λ‹λ‹¤.
3. **λ°±μ—”λ“ μ •μ‚°**: μ¶”μ¶λ Logprobsλ¥Ό Softmaxλ΅ λ³€ν™ν•κ³  λ‘ ν™•λ¥ μ ν‰κ· μ„ λ‚΄μ–΄ μµμΆ… P(A)μ™€ P(B)λ¥Ό μ‚°μ¶ν•©λ‹λ‹¤.
4. **κ²°κ³Ό**: **λ¬΄μΉλ¶€ μ§€μ¥(TIE)**κ³Ό **μ„μΉ νΈν–¥(Positional Bias)**μ„ λ™μ‹μ— ν•΄κ²°ν•λ©΄μ„, μν•™μ μΌλ΅ κ²€μ¦λ μΉμ(Winner)μ™€ μ‹ λΆ°λ„(Probability)λ¥Ό μ–»μ–΄ μ™„λ²½ν• PvP μ‹μ¤ν…μ„ κµ¬μ¶•ν•  μ μμµλ‹λ‹¤.

### π›΅ Addendum: μ™ PAIRS μμ‹μ„(Calibration) λ°±μ—”λ“μ— λ‚¨κ²¨λ‘μ–΄μ•Ό ν•λ”κ°€?
Constrained Decodingλ§μΌλ΅ μ„μΉ νΈν–¥μ΄ 0%κ°€ λμ—μμ—λ„, PAIRS λ΅μ° λ°μ΄ν„° κµμ • λ΅μ§μ„ μ κ±°ν•μ§€ μ•κ³  **λ°©μ–΄μ  μ•„ν‚¤ν…μ²(Fail-safe)**λ΅ λ‚¨κ²¨λ‘μ–΄μ•Ό ν•λ” μ΄μ λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

*   **μ΄λ°•λΉ™(Edge Case) νμ • λ³΄ν—**: λ‘ μ μ €μ λ‹µλ³€ ν€„λ¦¬ν‹°κ°€ μ°μ—΄μ„ κ°€λ¦¬κΈ° νλ“  μ μμΌ κ²½μ°, Enum μ μ•½μ—λ„ λ¶κµ¬ν•κ³  λ¨λΈμ΄ λ‹¤μ‹ ν…μ¤νΈμƒ λ¬΄μΉλ¶€(TIE)λ¥Ό λ‚Ό μ μμµλ‹λ‹¤. μ΄λ• PAIRS μμ‹μ΄ μ†μμ  λ‹¨μ„μ μ–‘λ°©ν–¥ ν‰κ· (`A: 51.2% vs B: 48.8%`)μ„ κ³„μ‚°ν•μ—¬ μµν›„μ νμ‚¬ μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.
*   **λ¨λΈ μ—…λ°μ΄νΈ λ€λΉ„ μ•μ „λ§**: LLM μ κ³µμ‚¬(Google)μ λ‚΄λ¶€ λ¨λΈ κ°€μ¤‘μΉ λ³€κ²½μΌλ΅ μ„μΉ νΈν–¥μ΄ μ¬λ°ν•λ”λΌλ„, μν•™μ  μƒκ³„ μ²λ¦¬(ν‰κ·  μ‚°μ¶) μ•κ³ λ¦¬μ¦μ΄ λ’¤μ—μ„ μ΄λ¥Ό λ°©μ–΄ν•΄ μ¤λ‹λ‹¤.
*   **κ²μ„ν™”(Gamification) μ§€ν‘ μ κ³µ**: λ‹¨μ μΉν¨ νμ •μ„ λ„μ–΄ μ μ € ν”„λ΅ νΈμ—”λ“μ— **"μΉλ¦¬ ν™•μ‹ λ„(Confidence Score)"**λ¥Ό μ κ³µλ ¥ν•μ—¬ μ½ν…μΈ μ μ¬λ―Έμ™€ νμ •μ μ„¤λ“λ ¥μ„ μ „μ μΌλ΅ λ’·λ°›μΉ¨ν•©λ‹λ‹¤.
